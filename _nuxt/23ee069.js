(window.webpackJsonp=window.webpackJsonp||[]).push([[46,8,15],{609:function(e,t,l){var content=l(616);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(18).default)("411a447d",content,!0,{sourceMap:!1})},611:function(e,t,l){var content=l(624);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(18).default)("51162e4c",content,!0,{sourceMap:!1})},612:function(e,t,l){"use strict";l.r(t);l(231);var o={props:{value:{type:[String,Array,Number],default:""},options:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1},placeholder:{type:String,default:"請選擇"},filterable:{type:Boolean,default:!1}}},n=l(615),r=l(7);var component=Object(r.a)(o,(function(){var e=this,t=e._self._c;return t("el-select",{class:e.$style.select,attrs:{value:e.value,filterable:e.filterable,multiple:e.multiple,"allow-create":e.allowCreate,"default-first-option":e.allowCreate,placeholder:e.placeholder,disabled:e.disabled,clearable:""},on:{input:function(t){return e.$emit("input",t)}}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)}),[],!1,(function(e){this.$style=n.default.locals||n.default}),null,null);t.default=component.exports},615:function(e,t,l){"use strict";var o=l(609),n=l.n(o);l.d(t,"default",(function(){return n.a}))},616:function(e,t,l){var o=l(17)(!1);o.push([e.i,".select_oWp9J .el-input{height:inherit;font-size:inherit}.select_oWp9J input{height:inherit}.select_oWp9J .el-select__tags-text,.select_oWp9J .el-tag{font-size:inherit}",""]),o.locals={select:"select_oWp9J"},e.exports=o},623:function(e,t,l){"use strict";var o=l(611),n=l.n(o);l.d(t,"default",(function(){return n.a}))},624:function(e,t,l){var o=l(17)(!1);o.push([e.i,".wrap_S1tQE{display:flex;padding:0 2.813rem;height:7.5rem;align-items:center;justify-content:space-between;box-shadow:0 1px 2px rgba(0,0,0,.25)}.label_R9lRg{font-size:1.375rem}.btn_CW11\\+,.btn-wrap_bKATz{display:flex;align-items:center;justify-content:center}.btn_CW11\\+{width:8.438rem;height:2.813rem;border-radius:5px;font-size:1.25rem;cursor:pointer}.delete_SWdbB{margin-right:3.75rem;background:#c02020}.delete_SWdbB,.edit_7z6fF{color:#fff}.edit_7z6fF{background:#1961b6}.edit_7z6fF,.save_bAory{margin-right:1.25rem}.save_bAory{background:#fcaa4a}.cancel_LueNp{border:1px solid #8c8c8c}.icon_dvsNw{margin-right:.625rem;width:1.25rem;height:1.25rem}",""]),o.locals={wrap:"wrap_S1tQE",label:"label_R9lRg",btn:"btn_CW11+","btn-wrap":"btn-wrap_bKATz",delete:"delete_SWdbB btn_CW11+",edit:"edit_7z6fF btn_CW11+",save:"save_bAory btn_CW11+",cancel:"cancel_LueNp btn_CW11+",icon:"icon_dvsNw"},e.exports=o},625:function(e,t,l){"use strict";l.r(t);var o={props:{type:{type:String,default:"view"},label:{type:String,required:!0},noShowDelete:{type:Boolean,default:!1},noShowEdit:{type:Boolean,default:!1},noShowSave:{type:Boolean,default:!1}},computed:{isView:function(){return"view"===this.type},labelText:function(){return"view"===this.type?"檢視".concat(this.label):"add"===this.type?"新增".concat(this.label):"custom"===this.type?this.label:"編輯".concat(this.label)}}},n=l(623),r=l(7);var component=Object(r.a)(o,(function(){var e=this,t=e._self._c;return t("div",{class:e.$style.wrap},[t("div",{class:e.$style.label},[e._v(e._s(e.labelText))]),e._v(" "),t("div",{class:e.$style["btn-wrap"]},[e.$slots.default?e._t("default"):[e.isView?[e.noShowDelete?e._e():t("div",{class:e.$style.delete,on:{click:function(t){return e.$emit("delete")}}},[t("fa-icon",{class:e.$style.icon,attrs:{icon:"trash"}}),e._v("\n                    刪除\n                ")],1),e._v(" "),e.noShowEdit?e._e():t("div",{class:e.$style.edit,on:{click:function(t){return e.$emit("edit")}}},[t("fa-icon",{class:e.$style.icon,attrs:{icon:"pen"}}),e._v("\n                    編輯\n                ")],1)]:e.noShowSave?e._e():t("div",{class:e.$style.save,on:{click:function(t){return e.$emit("save")}}},[e._v("\n                儲存\n            ")]),e._v(" "),t("div",{class:e.$style.cancel,on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n                取消\n            ")])]],2)])}),[],!1,(function(e){this.$style=n.default.locals||n.default}),null,null);t.default=component.exports},689:function(e,t,l){var content=l(779);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(18).default)("687f3502",content,!0,{sourceMap:!1})},778:function(e,t,l){"use strict";var o=l(689),n=l.n(o);l.d(t,"default",(function(){return n.a}))},779:function(e,t,l){var o=l(17)(!1);o.push([e.i,".wrap_EJunT{flex:1;display:flex;flex-direction:column;box-sizing:border-box}.content-block_c8nTQ{padding:4.375rem 2.813rem}.tabs_CM6R3{display:flex;position:relative}.tabs_CM6R3 :first-child{margin-right:.625rem}.tab_dcugw{padding:1.063rem 2.75rem;border-bottom:8px solid #e0e0e0;font-size:1.125rem;cursor:pointer}.tab_dcugw.active_S8Kk3{border-bottom-color:#124178;color:#124178}.line_d1s21{z-index:-1;position:absolute;left:0;bottom:0;width:100%;height:8px;background:#e0e0e0}.fields_KtVhY{margin-top:1.188rem;border:1px solid #8c8c8c;font-size:1.125rem}.fields_KtVhY.edit-mode_wE5u-{border:0}.fields_KtVhY.edit-mode_wE5u- .field_Q7JAg{margin-bottom:1rem;border-bottom:0}.fields_KtVhY.edit-mode_wE5u- .label_WTMNX{color:#000;color:initial}.field_Q7JAg{display:flex;align-items:center;border-bottom:1px solid #8c8c8c}.field_Q7JAg:last-child{border-bottom:0}.label_WTMNX{margin:1.75rem .75rem 1.75rem 2.063rem;width:5rem;color:#124178}.info_NPfbk{margin-top:2.5rem;font-size:1.125rem}.info_NPfbk>div{margin-bottom:1.25rem}.input_VZHNl{width:12.5rem;height:3.438rem}.input_VZHNl.email_gf190{width:37.5rem}.select_mNLZn{width:12.5rem;height:2.813rem}",""]),o.locals={wrap:"wrap_EJunT","content-block":"content-block_c8nTQ",tabs:"tabs_CM6R3",tab:"tab_dcugw",active:"active_S8Kk3",line:"line_d1s21",fields:"fields_KtVhY","edit-mode":"edit-mode_wE5u-",field:"field_Q7JAg",label:"label_WTMNX",info:"info_NPfbk",input:"input_VZHNl",email:"email_gf190",select:"select_mNLZn"},e.exports=o},807:function(e,t,l){"use strict";l.r(t);var o=l(10),n=(l(36),l(26),l(21),l(28),l(12),l(34),l(22),l(35),l(232),l(108),l(13)),r=l(625),d=l(107),c=l(612),f=l(236),_=l(233);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(object);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,l)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={components:{EditBar:r.default,FieldInput:d.default,FieldSelect:c.default,DeleteDialog:f.default,AlterDialog:_.default},data:function(){return{id:this.$route.params.id,type:this.$route.query.type,curTab:"tab1",errorMsg:"",data:{},showDialog:!1}},computed:h(h({},Object(n.c)("options",{storeOptions:"getStore",riverBirdOptions:"getRiverBird"})),{},{isEditMode:function(){return"edit"===this.type}}),mounted:function(){this.onSearch()},methods:h(h({},Object(n.b)(["actionSetToast"])),{},{validField:function(){var e=[];return this.data.name||e.push("<div>◎請輸入中文姓名</div>"),this.data.phone||e.push("<div>◎請輸入手機</div>"),this.data.store.id||e.push("<div>◎請選擇公司</div>"),2!==this.data.store.id||this.data.store_branche_id||e.push("<div>◎請選擇店別</div>"),!e.length||(this.errorMsg=e.join(""),!1)},onSearch:function(){var e=this;this.$axios.$get("/api/user/".concat(this.id)).then((function(t){t.success&&(e.data=t.data)}))},onEdit:function(){this.type="edit",this.$router.push("/staff/".concat(this.id,"?type=").concat(this.type))},onDelete:function(){var e=this;this.$axios.$delete("/api/user/".concat(this.id)).then((function(t){t.success&&(e.showDialog=!1,e.actionSetToast("删除成功"),e.onBack())}))},onSave:function(){var e=this;this.validField()&&this.$axios.$put("/api/user/".concat(this.id),{name:this.data.name,phone:this.data.phone,email:this.data.email,store_branche_id:this.data.store_branche_id,store_id:this.data.store.id}).then((function(t){t.success&&(e.actionSetToast("修改成功"),e.onBack())}))},onBack:function(){this.$router.push("/staff")}})},y=l(778),w=l(7);var component=Object(w.a)(m,(function(){var e=this,t=e._self._c;return t("div",{class:e.$style.wrap},[t("EditBar",{attrs:{type:e.type,label:"員工"},on:{delete:function(t){e.showDialog=!0},edit:e.onEdit,save:e.onSave,cancel:e.onBack}}),e._v(" "),t("div",{class:e.$style["content-block"]},[t("div",{class:e.$style.tabs},[t("div",{class:[e.$style.tab,Object(o.a)({},e.$style.active,"tab1"===e.curTab)],on:{click:function(t){e.curTab="tab1"}}},[e._v("\n                基本資訊\n            ")]),e._v(" "),t("div",{class:[e.$style.tab,Object(o.a)({},e.$style.active,"tab2"===e.curTab)],on:{click:function(t){e.curTab="tab2"}}},[e._v("\n                職務/差勤\n            ")]),e._v(" "),t("div",{class:e.$style.line})]),e._v(" "),t("div",{class:[e.$style.fields,Object(o.a)({},e.$style["edit-mode"],e.isEditMode)]},["tab1"===e.curTab?[t("div",{class:e.$style.field},[t("div",{class:e.$style.label,attrs:{required:e.isEditMode}},[e._v("中文姓名")]),e._v(" "),e.isEditMode?t("FieldInput",{class:e.$style.input,attrs:{placeholder:"輸入中文"},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}}):t("div",[e._v(e._s(e.data.name))])],1),e._v(" "),t("div",{class:e.$style.field},[t("div",{class:e.$style.label,attrs:{required:e.isEditMode}},[e._v("手機")]),e._v(" "),e.isEditMode?t("FieldInput",{class:e.$style.input,attrs:{placeholder:"格式:0912345678"},model:{value:e.data.phone,callback:function(t){e.$set(e.data,"phone",t)},expression:"data.phone"}}):t("div",[e._v(e._s(e.data.phone))])],1),e._v(" "),t("div",{class:e.$style.field},[t("div",{class:e.$style.label},[e._v("電子信箱")]),e._v(" "),e.isEditMode?t("FieldInput",{class:[e.$style.input,e.$style.email],attrs:{placeholder:"輸入有效電子信箱"},model:{value:e.data.email,callback:function(t){e.$set(e.data,"email",t)},expression:"data.email"}}):t("div",[e._v(e._s(e.data.email))])],1)]:[t("div",{class:e.$style.field},[t("div",{class:e.$style.label,attrs:{required:e.isEditMode}},[e._v("公司")]),e._v(" "),e.isEditMode?t("FieldSelect",{class:e.$style.select,attrs:{options:e.storeOptions},model:{value:e.data.store.id,callback:function(t){e.$set(e.data.store,"id",t)},expression:"data.store.id"}}):t("div",[e._v(e._s(e.data.store.name))])],1),e._v(" "),1!==e.data.store.id?t("div",{class:e.$style.field},[t("div",{class:e.$style.label,attrs:{required:e.isEditMode}},[e._v("店別")]),e._v(" "),e.isEditMode?t("FieldSelect",{class:e.$style.select,attrs:{options:e.riverBirdOptions},model:{value:e.data.store_branche_id,callback:function(t){e.$set(e.data,"store_branche_id",t)},expression:"data.store_branche_id"}}):t("div",[e._v(e._s(e.data.store_branch.name))])],1):e._e()]],2),e._v(" "),e.isEditMode?e._e():t("div",{class:e.$style.info},[t("div",[e._v("建檔人員 : "+e._s(e.data.createUser))]),e._v(" "),t("div",[e._v("異動人員 : "+e._s(e.data.updateUser))])])]),e._v(" "),e.showDialog?t("DeleteDialog",{on:{delete:e.onDelete,close:function(t){e.showDialog=!1}}}):e._e(),e._v(" "),e.errorMsg?t("AlterDialog",{attrs:{msg:e.errorMsg},on:{close:function(t){e.errorMsg=""}}}):e._e()],1)}),[],!1,(function(e){this.$style=y.default.locals||y.default}),null,null);t.default=component.exports}}]);