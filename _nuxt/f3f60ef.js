(window.webpackJsonp=window.webpackJsonp||[]).push([[45,9,11],{614:function(e,t,r){var content=r(631);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(18).default)("575beeec",content,!0,{sourceMap:!1})},617:function(e,t,r){var content=r(640);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(18).default)("60cda17f",content,!0,{sourceMap:!1})},630:function(e,t,r){"use strict";var n=r(614),o=r.n(n);r.d(t,"default",(function(){return o.a}))},631:function(e,t,r){var n=r(17)(!1);n.push([e.i,".wrap_heLqv{display:flex;align-items:center;justify-content:space-between}.input_AVnx5{width:39.688rem;height:3.438rem;border:1px solid #8c8c8c}.user_WNE0P{position:relative;padding:1.063rem 1rem;cursor:pointer}.menu_ANbYz,.user_WNE0P{font-weight:400;font-size:1.125rem}.menu_ANbYz{position:absolute;top:100%;right:0;padding:1.375rem 9.313rem 1.375rem .938rem;width:100%;border-radius:5px;box-shadow:0 0 5px 1px rgba(0,0,0,.5)}",""]),n.locals={wrap:"wrap_heLqv",input:"input_AVnx5",user:"user_WNE0P",menu:"menu_ANbYz"},e.exports=n},633:function(e,t,r){"use strict";r.r(t);r(36),r(26),r(21),r(28),r(12),r(34),r(22),r(35);var n=r(10),o=(r(231),r(13));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var l={components:{FieldInput:r(107).default},props:{value:{type:[String,Number],default:""}},data:function(){return{isShowMenu:!1}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.c)({userInfo:"getUserInfo"})),methods:{logout:function(){var e=this;this.$axios.$post("/api/logout").then((function(t){t.success&&(localStorage.setItem("user",""),e.$axios.setToken("","Bearer"),e.$cookiz.set("token",""),e.$router.push("/login"))}))}}},d=l,f=r(630),h=r(7);var component=Object(h.a)(d,(function(){var e,t=this,r=t._self._c;return r("div",{class:t.$style.wrap},[r("FieldInput",{class:t.$style.input,attrs:{value:t.value,placeholder:"搜尋","suffix-icon":"el-icon-search"},on:{input:function(e){return t.$emit("input",e)}}}),t._v(" "),r("div",{class:t.$style.user,on:{click:function(e){t.isShowMenu=!t.isShowMenu}}},[t._v("\n        "+t._s("Hello ".concat(null===(e=t.userInfo)||void 0===e?void 0:e.name))+"\n        "),r("transition",{attrs:{name:"fade"}},[t.isShowMenu?r("div",{class:t.$style.menu,on:{click:function(e){return e.stopPropagation(),t.logout.apply(null,arguments)}}},[t._v("\n                登出\n            ")]):t._e()])],1)],1)}),[],!1,(function(e){this.$style=f.default.locals||f.default}),null,null);t.default=component.exports},639:function(e,t,r){"use strict";var n=r(617),o=r.n(n);r.d(t,"default",(function(){return o.a}))},640:function(e,t,r){var n=r(17)(!1);n.push([e.i,".button_5mDZh{font-size:1.125rem}.button_5mDZh.add_miUKL{background:#1961b6;color:#fff}.button_5mDZh.cancel_MiCbF{color:#333;border-color:#8c8c8c}.button_5mDZh.cancel_MiCbF:hover{background:#fff}.button_5mDZh.next_HTSP8{background:#fcaa4a;color:#333}.button_5mDZh:hover{opacity:.9}",""]),n.locals={button:"button_5mDZh",add:"add_miUKL",cancel:"cancel_MiCbF",next:"next_HTSP8"},e.exports=n},641:function(e,t,r){"use strict";r.r(t);var n={props:{type:{type:String,default:""},disabled:{type:Boolean,default:!1},size:{type:String,default:""}}},o=r(639),c=r(7);var component=Object(c.a)(n,(function(){var e=this;return(0,e._self._c)("el-button",{class:[e.$style.button,e.$style[e.type]],attrs:{type:e.type,disabled:e.disabled,size:e.size},on:{click:function(t){return e.$emit("click")}}},[e._t("default")],2)}),[],!1,(function(e){this.$style=o.default.locals||o.default}),null,null);t.default=component.exports},677:function(e,t,r){var content=r(755);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(18).default)("fbaf22b4",content,!0,{sourceMap:!1})},751:function(e,t,r){"use strict";var n=r(2),o=r(111).find,c=r(240),l="find",d=!0;l in[]&&Array(1).find((function(){d=!1})),n({target:"Array",proto:!0,forced:d},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),c(l)},754:function(e,t,r){"use strict";var n=r(677),o=r.n(n);r.d(t,"default",(function(){return o.a}))},755:function(e,t,r){var n=r(17)(!1);n.push([e.i,".main-wrap_kq2fw{padding:2rem 1.875rem 2.5rem;width:100%;font-size:1.125rem}.search-block_lbiNI{display:flex;flex-direction:column;margin-top:1.25rem}.input_2JXok{margin-bottom:1.25rem;max-width:32rem;width:32rem;height:3.5rem}.select_qquvs{width:12.5rem;height:2.813rem}.add-btn_sQSGB{display:block;margin-left:auto;padding:.938rem 1.938rem;font-size:1.375rem}.cards-block_mw3DN{display:flex;flex-wrap:wrap;padding:1rem 0}.card_BjEOn{margin:.8rem .8rem .2rem 0;padding:1.5rem;width:22rem;height:11rem;border:1px solid #8c8c8c;border-radius:5px}.store-name_PPWmV{font-size:1.375rem}.store-name_PPWmV,.store-type_inwrr{margin-bottom:1.25rem}.feature-wrap_mksop{display:flex;padding-top:2.188rem;justify-content:space-between}.feature_JLBUf{display:flex;padding:.5rem 1rem .5rem 1.25rem;border-radius:20px;transition:.3s;cursor:pointer}.feature_JLBUf:hover{background:#e2e8f0}.icon_TBrb8{width:1.25rem;height:1.25rem;margin-right:.5rem}",""]),n.locals={"main-wrap":"main-wrap_kq2fw","search-block":"search-block_lbiNI",input:"input_2JXok",select:"select_qquvs","add-btn":"add-btn_sQSGB","cards-block":"cards-block_mw3DN",card:"card_BjEOn","store-name":"store-name_PPWmV","store-type":"store-type_inwrr","feature-wrap":"feature-wrap_mksop",feature:"feature_JLBUf",icon:"icon_TBrb8"},e.exports=n},792:function(e,t,r){"use strict";r.r(t);r(36),r(21),r(34),r(22),r(35);var n=r(10),o=r(27),c=(r(28),r(12),r(234),r(39),r(51),r(52),r(26),r(57),r(751),r(13)),l=r(612),d=r(641),f=r(236),h=r(633),m=r(786);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y={components:{FieldSelect:l.default,FieldButton:d.default,SearchBar:h.default,AddNewStore:m.default,DeleteDialog:f.default},data:function(){return{curHandler:"",searchKeyWord:"",searchType:null,operateOptions:[{value:null,label:"不分經營模式"},{value:0,label:"直營"},{value:1,label:"加盟"}],storeId:"",retailsData:[]}},computed:{filterRetailData:function(){var e=this,t=this.retailsData;return null!==this.searchType&&(t=t.filter((function(t){return t.franchise_store===e.searchType}))),this.searchKeyWord&&(t=t.filter((function(t){return Object.entries(t).some((function(t){var r=Object(o.a)(t,2),n=r[0],c=r[1];return!!e.column.some((function(e){return e.prop===n}))&&"".concat(c).includes(e.searchKeyWord)}))}))),t}},created:function(){this.getRetailsData()},methods:_(_({},Object(c.b)(["actionSetToast"])),{},{handlerDialog:function(e){var t=e.type,r=e.id;switch(this.storeId=r||"",t){case"add":case"delete":this.curHandler=t;break;case"edit":this.$router.push("/retails/".concat(this.storeId,"?mode=edit"));break;case"view":this.$router.push("/retails/".concat(this.storeId,"?mode=view"))}},getRetailsData:function(){var e=this;this.$axios.$get("api/store/riverBird").then((function(t){t.success&&(e.retailsData=t.data.map((function(e){var t=JSON.parse(e.business_hours);return t=Object.keys(t).reduce((function(e,r){if("close"===t[r])return e[r]="close",e;var time=[[t[r].slice(0,2),t[r].slice(2,4)],[t[r].slice(5,7),t[r].slice(7,9)]];return e[r]=time,e}),{}),_(_({},e),{},{business_hours:t})})))}))},getTypeName:function(e){return this.operateOptions.find((function(t){return t.value===e})).label},deleteStore:function(){var e=this;this.$axios.$delete("/api/store/riverBird/".concat(this.storeId)).then((function(t){t.success&&(e.actionSetToast("删除成功"),e.getRetailsData(),e.storeId=null,e.curHandler="")}))}})},w=r(754),O=r(7);var component=Object(O.a)(y,(function(){var e=this,t=e._self._c;return t("div",{class:e.$style["main-wrap"]},[t("SearchBar",{model:{value:e.searchKeyWord,callback:function(t){e.searchKeyWord=t},expression:"searchKeyWord"}}),e._v(" "),t("div",{class:e.$style["search-block"]},[t("FieldSelect",{class:e.$style.select,attrs:{options:e.operateOptions,placeholder:"選擇經營模式"},model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}})],1),e._v(" "),t("div",{class:e.$style.content},[t("FieldButton",{class:e.$style["add-btn"],attrs:{type:"add"},on:{click:function(t){return e.handlerDialog({type:"add"})}}},[e._v("\n            新增分店\n        ")]),e._v(" "),t("div",[e._v("\n            共"+e._s(e.filterRetailData.length)+"項\n        ")]),e._v(" "),t("section",{class:e.$style["cards-block"]},e._l(e.filterRetailData,(function(r){return t("div",{key:r.id,class:e.$style.card},[t("div",{class:e.$style["store-name"]},[e._v("\n                    "+e._s(r.name)+"\n                ")]),e._v(" "),t("div",{class:e.$style["store-type"]},[e._v("\n                    "+e._s(e.getTypeName(r.franchise_store))+"\n                ")]),e._v(" "),t("div",[e._v("\n                    "+e._s(r.store_number)+"\n                ")]),e._v(" "),t("div",{class:e.$style["feature-wrap"]},[t("div",{class:e.$style.feature,on:{click:function(t){return e.handlerDialog({type:"view",id:r.id})}}},[t("fa-icon",{class:e.$style.icon,attrs:{icon:"eye"}}),e._v(" "),t("div",[e._v("檢視")])],1),e._v(" "),t("div",{class:e.$style.feature,on:{click:function(t){return e.handlerDialog({type:"edit",id:r.id})}}},[t("fa-icon",{class:e.$style.icon,attrs:{icon:"pen"}}),e._v(" "),t("div",[e._v("編輯")])],1),e._v(" "),t("div",{class:e.$style.feature,on:{click:function(t){return e.handlerDialog({type:"delete",id:r.id})}}},[t("fa-icon",{class:e.$style.icon,attrs:{icon:"trash-can"}}),e._v(" "),t("div",[e._v("刪除")])],1)])])})),0)],1),e._v(" "),"add"===e.curHandler?t("AddNewStore",{on:{close:function(t){e.curHandler=""},reload:e.getRetailsData}}):e._e(),e._v(" "),"delete"===e.curHandler?t("DeleteDialog",{on:{delete:e.deleteStore,close:function(t){e.curHandler=""}}}):e._e()],1)}),[],!1,(function(e){this.$style=w.default.locals||w.default}),null,null);t.default=component.exports}}]);