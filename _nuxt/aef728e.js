(window.webpackJsonp=window.webpackJsonp||[]).push([[36,8,13,15,17,21],{609:function(e,t,r){var content=r(616);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(18).default)("411a447d",content,!0,{sourceMap:!1})},610:function(e,t,r){var content=r(619);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(18).default)("1ddf586a",content,!0,{sourceMap:!1})},611:function(e,t,r){var content=r(624);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(18).default)("51162e4c",content,!0,{sourceMap:!1})},612:function(e,t,r){"use strict";r.r(t);r(231);var n={props:{value:{type:[String,Array,Number],default:""},options:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1},placeholder:{type:String,default:"請選擇"},filterable:{type:Boolean,default:!1}}},l=r(615),o=r(7);var component=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("el-select",{class:e.$style.select,attrs:{value:e.value,filterable:e.filterable,multiple:e.multiple,"allow-create":e.allowCreate,"default-first-option":e.allowCreate,placeholder:e.placeholder,disabled:e.disabled,clearable:""},on:{input:function(t){return e.$emit("input",t)}}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)}),[],!1,(function(e){this.$style=l.default.locals||l.default}),null,null);t.default=component.exports},613:function(e,t,r){var content=r(629);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(18).default)("02fd0413",content,!0,{sourceMap:!1})},615:function(e,t,r){"use strict";var n=r(609),l=r.n(n);r.d(t,"default",(function(){return l.a}))},616:function(e,t,r){var n=r(17)(!1);n.push([e.i,".select_oWp9J .el-input{height:inherit;font-size:inherit}.select_oWp9J input{height:inherit}.select_oWp9J .el-select__tags-text,.select_oWp9J .el-tag{font-size:inherit}",""]),n.locals={select:"select_oWp9J"},e.exports=n},618:function(e,t,r){"use strict";var n=r(610),l=r.n(n);r.d(t,"default",(function(){return l.a}))},619:function(e,t,r){var n=r(17)(!1);n.push([e.i,".date-picker_-Mwr9{display:inline-block;position:relative}.date-picker_-Mwr9 .el-date-editor{width:inherit;height:inherit;font-size:1.125rem}.date-picker_-Mwr9 input{padding-left:15px!important;width:inherit;height:inherit;font-size:inherit!important}.date-picker_-Mwr9 .el-date-editor--datetimerange{padding-left:70px}.date-picker_-Mwr9.has-icon_ykGcO input{padding-right:15px!important}.label_TxIZx{left:10px}.icon_CtwZa,.label_TxIZx{position:absolute;top:50%;transform:translateY(-50%)}.icon_CtwZa{right:10px}",""]),n.locals={"date-picker":"date-picker_-Mwr9","has-icon":"has-icon_ykGcO",label:"label_TxIZx",icon:"icon_CtwZa"},e.exports=n},620:function(e,t,r){"use strict";r.r(t);var n=r(10),l=(r(231),{props:{value:{type:[String,Number,Date,Array],default:null},type:{type:String,default:"date"},label:{type:String,default:""},icon:{type:Boolean,default:!0}}}),o=r(618),c=r(7);var component=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("div",{class:[e.$style["date-picker"],Object(n.a)({},e.$style["has-icon"],e.icon)]},[t("el-date-picker",{attrs:{value:e.value,type:e.type,placeholder:"選擇日期","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd",clearable:!1,"prefix-icon":" ","range-separator":"~"},on:{input:function(t){return e.$emit("input",t)}}}),e._v(" "),e.label?t("div",{class:e.$style.label},[e._v(e._s(e.label))]):e._e(),e._v(" "),e.icon?t("fa-icon",{class:e.$style.icon,attrs:{icon:["far","calendar"]}}):e._e()],1)}),[],!1,(function(e){this.$style=o.default.locals||o.default}),null,null);t.default=component.exports},622:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return l}));r(12),r(109),r(40),r(87),r(232);var n=function(e){if(!e)return"0";var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},l=function(e){return new Intl.NumberFormat("zh-TW",{maximumSignificantDigits:10,style:"currency",currency:"NTD"}).format(e)}},623:function(e,t,r){"use strict";var n=r(611),l=r.n(n);r.d(t,"default",(function(){return l.a}))},624:function(e,t,r){var n=r(17)(!1);n.push([e.i,".wrap_S1tQE{display:flex;padding:0 2.813rem;height:7.5rem;align-items:center;justify-content:space-between;box-shadow:0 1px 2px rgba(0,0,0,.25)}.label_R9lRg{font-size:1.375rem}.btn_CW11\\+,.btn-wrap_bKATz{display:flex;align-items:center;justify-content:center}.btn_CW11\\+{width:8.438rem;height:2.813rem;border-radius:5px;font-size:1.25rem;cursor:pointer}.delete_SWdbB{margin-right:3.75rem;background:#c02020}.delete_SWdbB,.edit_7z6fF{color:#fff}.edit_7z6fF{background:#1961b6}.edit_7z6fF,.save_bAory{margin-right:1.25rem}.save_bAory{background:#fcaa4a}.cancel_LueNp{border:1px solid #8c8c8c}.icon_dvsNw{margin-right:.625rem;width:1.25rem;height:1.25rem}",""]),n.locals={wrap:"wrap_S1tQE",label:"label_R9lRg",btn:"btn_CW11+","btn-wrap":"btn-wrap_bKATz",delete:"delete_SWdbB btn_CW11+",edit:"edit_7z6fF btn_CW11+",save:"save_bAory btn_CW11+",cancel:"cancel_LueNp btn_CW11+",icon:"icon_dvsNw"},e.exports=n},625:function(e,t,r){"use strict";r.r(t);var n={props:{type:{type:String,default:"view"},label:{type:String,required:!0},noShowDelete:{type:Boolean,default:!1},noShowEdit:{type:Boolean,default:!1},noShowSave:{type:Boolean,default:!1}},computed:{isView:function(){return"view"===this.type},labelText:function(){return"view"===this.type?"檢視".concat(this.label):"add"===this.type?"新增".concat(this.label):"custom"===this.type?this.label:"編輯".concat(this.label)}}},l=r(623),o=r(7);var component=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("div",{class:e.$style.wrap},[t("div",{class:e.$style.label},[e._v(e._s(e.labelText))]),e._v(" "),t("div",{class:e.$style["btn-wrap"]},[e.$slots.default?e._t("default"):[e.isView?[e.noShowDelete?e._e():t("div",{class:e.$style.delete,on:{click:function(t){return e.$emit("delete")}}},[t("fa-icon",{class:e.$style.icon,attrs:{icon:"trash"}}),e._v("\n                    刪除\n                ")],1),e._v(" "),e.noShowEdit?e._e():t("div",{class:e.$style.edit,on:{click:function(t){return e.$emit("edit")}}},[t("fa-icon",{class:e.$style.icon,attrs:{icon:"pen"}}),e._v("\n                    編輯\n                ")],1)]:e.noShowSave?e._e():t("div",{class:e.$style.save,on:{click:function(t){return e.$emit("save")}}},[e._v("\n                儲存\n            ")]),e._v(" "),t("div",{class:e.$style.cancel,on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n                取消\n            ")])]],2)])}),[],!1,(function(e){this.$style=l.default.locals||l.default}),null,null);t.default=component.exports},628:function(e,t,r){"use strict";var n=r(613),l=r.n(n);r.d(t,"default",(function(){return l.a}))},629:function(e,t,r){var n=r(17)(!1);n.push([e.i,'.table_mY8UH{border:1px solid #8c8c8c}.table_mY8UH .el-radio{margin-right:10px}.table_mY8UH .el-radio__label{padding-left:5px}.table_mY8UH .el-input--suffix .el-input__inner{padding-right:15px!important}.table_mY8UH .el-checkbox__inner{width:1.25rem;height:1.25rem;border:1px solid #2a2a2a;border-radius:1px;background-color:transparent;background-color:initial}.table_mY8UH .el-checkbox__inner:after{top:50%;left:25%;width:.3rem;height:.7rem}.table_mY8UH .el-checkbox__input.is-checked .el-checkbox__inner:after{transform:rotate(45deg) scaleY(1) translate(-50%,-50%)}.table_mY8UH .el-checkbox__input.is-indeterminate .el-checkbox__inner:before{top:50%}.table_mY8UH .sort-caret.ascending,.table_mY8UH .sort-caret.descending{border:initial;left:auto;right:auto}.table_mY8UH .sort-caret.ascending{position:absolute;top:47%;left:6px;width:1px;height:30%;background:#333;transform:translateY(-50%)}.table_mY8UH .sort-caret.ascending:before{content:"";position:absolute;top:-1px;left:-2.5px;border-color:transparent transparent #333;border-style:solid;border-width:0 3px 3px}.table_mY8UH .sort-caret.descending{position:absolute;top:47%;left:13px;width:1px;height:30%;background:#333;transform:translateY(-50%)}.table_mY8UH .sort-caret.descending:after{content:"";position:absolute;left:-2.5px;bottom:-1px;border-color:#333 transparent transparent;border-style:solid;border-width:3px 3px 0}.table_mY8UH th{font-weight:400}.icon_gkwIt{margin:0 1.813rem;width:1.25rem;height:1.25rem;text-align:center;transform:rotate(-45deg)}.left-icon_DaE\\+U{transform:rotate(45deg)}.options-icon_wrHhb{margin-right:1rem;width:1.25rem;height:1.25rem;cursor:pointer}.options-icon_wrHhb:last-child{margin-right:1.25rem}.options-icon_wrHhb.view-icon_Z9iCc{width:1.375rem;height:1rem}.options-icon_wrHhb.delete-icon_FbuLQ{width:1.125rem}.operate_x05ot{justify-content:flex-end;font-size:1rem}.empty_gJfXa,.operate_x05ot{display:flex;align-items:center}.empty_gJfXa{justify-content:center;font-size:1.5rem}.btn_3jk-A,.options_McJ7b{cursor:pointer}.btn_3jk-A{display:flex;max-width:6rem;height:2.25rem;border-radius:.375rem;color:#fff;font-size:1rem;align-items:center;justify-content:center}.yet_6utED{background:#c02020}.done_aj33C,.yet_6utED{}.done_aj33C{background:#4d8831}.remove_qv16R{width:2rem;height:2rem;background:#c02020}.remove_qv16R>svg{color:#fff}.plus_bHaj8{width:2rem;height:2rem;background:#4d8831}.plus_bHaj8>svg{color:#fff}.input_CQA1Z{width:100%;height:3rem}',""]),n.locals={table:"table_mY8UH",icon:"icon_gkwIt","left-icon":"left-icon_DaE+U icon_gkwIt","options-icon":"options-icon_wrHhb","view-icon":"view-icon_Z9iCc","delete-icon":"delete-icon_FbuLQ",operate:"operate_x05ot",empty:"empty_gJfXa",btn:"btn_3jk-A",options:"options_McJ7b",yet:"yet_6utED btn_3jk-A",done:"done_aj33C btn_3jk-A",remove:"remove_qv16R btn_3jk-A",plus:"plus_bHaj8 btn_3jk-A",input:"input_CQA1Z"},e.exports=n},632:function(e,t,r){"use strict";r.r(t);var n=r(622),l=r(107),o=r(612),c=r(620),d={components:{FieldInput:l.default,FieldSelect:o.default,FieldDatePick:c.default},props:{tableData:{type:Array,default:function(){return[]}},column:{type:Array,default:function(){return[]}},selection:{type:Boolean,default:!1},typeLabel:{type:String,default:""},border:{type:Boolean,default:!0},emptyIconLeft:{type:Boolean,default:!1},fit:{type:Boolean,default:!0}},methods:{toCurrency:n.b,headerCellStyle:function(e){var t=e.row,r=e.columnIndex,n="function"===this.column[this.column.length-1].prop;return"selection"===t[r].type||n&&r>t.length-3?{color:"#333",borderColor:"#333",borderRight:0}:{color:"#333",borderColor:"#333"}}}},_=r(628),f=r(7);var component=Object(f.a)(d,(function(){var e=this,t=e._self._c;return t("el-table",{class:e.$style.table,attrs:{data:e.tableData,height:"100%",stripe:"",border:e.border,size:"mini","header-cell-style":e.headerCellStyle,"row-style":{height:"3.125rem",background:"#E0E0E0"},"cell-style":{borderRight:0},fit:e.fit},on:{"selection-change":function(t){return e.$emit("selectionChange",t)}},scopedSlots:e._u([{key:"empty",fn:function(){return[e.typeLabel?t("div",{class:e.$style.empty},[e.emptyIconLeft?t("fa-icon",{class:e.$style["left-icon"],attrs:{icon:"arrow-left"}}):e._e(),e._v("\n            "+e._s("動手新增".concat(e.typeLabel,"吧！"))+"\n            "),e.emptyIconLeft?e._e():t("fa-icon",{class:e.$style.icon,attrs:{icon:"arrow-right"}})],1):e._e()]},proxy:!0}])},[e._v(" "),e.selection?t("el-table-column",{attrs:{type:"selection","cell-style":{borderRight:0},width:"50"}}):e._e(),e._v(" "),e._l(e.column,(function(r){return t("el-table-column",{key:r.prop,attrs:{prop:r.prop,label:r.label,sortable:r.sortable,width:r.width},scopedSlots:e._u([{key:"default",fn:function(n){var l;return["remove"===r.prop&&n.row.isHideRemove?[t("div",{class:e.$style.remove,on:{click:function(e){return r.func(n.row)}}},[t("fa-icon",{attrs:{icon:"times"}})],1)]:"add"===r.prop?[t("div",{class:n.row.id?e.$style.plus:e.$style.remove,on:{click:function(e){return r.func(n.row,n.$index)}}},[t("fa-icon",{attrs:{icon:n.row.id?"plus":"minus"}})],1)]:"index"===r.prop?[e._v("\n                "+e._s(n.$index+1)+"\n            ")]:"function"===r.prop?[t("div",{class:e.$style.operate},e._l(r.detail,(function(r){return t("div",{key:"options-".concat(r.key),class:e.$style.options,on:{click:function(e){return r.func(n.row)}}},[r.icon?[n.row.isHideEdit&&"edit"===r.key||n.row.isHideDelete&&"delete"===r.key||n.row.isHideCheck&&"check"===r.key?void 0:t("img",{class:[e.$style["options-icon"],e.$style["".concat(r.key,"-icon")]],attrs:{src:"/".concat(r.key,".png")}})]:t("div",[e._v("\n                            "+e._s(r.label)+"\n                        ")])],2)})),0)]:"purchases_status_name"===r.prop&&0===n.row.inspections_status?[t("div",{class:0===n.row.purchases_status?e.$style.yet:e.$style.done,on:{click:function(e){return r.func(n.row)}}},[e._v("\n                    "+e._s(n.row.purchases_status_name)+"\n                ")])]:r.isInput||null!==(l=r.isInputFun)&&void 0!==l&&l.call(r,n.row)?[t("FieldInput",{class:e.$style.input,attrs:{value:n.row[r.prop]},on:{input:function(t){e.$set(n.row,r.prop,t),"amount"===r.prop&&(n.row.subtotal=n.row[r.prop]*n.row.cost)}}})]:r.isSelect?[t("FieldSelect",{class:e.$style.input,attrs:{options:r.options},model:{value:n.row[r.prop],callback:function(t){e.$set(n.row,r.prop,t)},expression:"scope.row[item.prop]"}})]:r.isDatePicker?[t("FieldDatePick",{class:e.$style.input,attrs:{icon:!1},model:{value:n.row[r.prop],callback:function(t){e.$set(n.row,r.prop,t)},expression:"scope.row[item.prop]"}})]:r.isRadio?e._l(r.options,(function(option){return t("el-radio",{key:option.value,attrs:{label:option.value},model:{value:n.row[r.prop],callback:function(t){e.$set(n.row,r.prop,t)},expression:"scope.row[item.prop]"}},[e._v("\n                    "+e._s(option.label)+"\n                ")])})):[e._v("\n                "+e._s(r.isNumber?e.toCurrency(n.row[r.prop]):n.row[r.prop])+"\n            ")]]}}],null,!0)})}))],2)}),[],!1,(function(e){this.$style=_.default.locals||_.default}),null,null);t.default=component.exports},683:function(e,t,r){var content=r(767);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(18).default)("83936b9e",content,!0,{sourceMap:!1})},766:function(e,t,r){"use strict";var n=r(683),l=r.n(n);r.d(t,"default",(function(){return l.a}))},767:function(e,t,r){var n=r(17)(!1);n.push([e.i,".wrap_Q8DFK{flex:1;display:flex;flex-direction:column;box-sizing:border-box}.content-block_dDHkf{display:flex;padding:4.375rem 2.813rem;flex-direction:column;height:100%}.content-block_dDHkf .el-collapse{border-color:#1961b6}.content-block_dDHkf .el-collapse-item__arrow{margin-left:1rem;font-size:1.25rem;color:#333}.content-block_dDHkf .active_CDEb9 .el-collapse-item__header,.content-block_dDHkf .el-collapse-item__header:hover{background:rgba(0,0,0,.04)}.content-block_dDHkf .active_CDEb9 .el-icon-arrow-right{transform:rotate(-90deg)}.content-block_dDHkf .mutli-field_L7e7P{display:flex;margin-bottom:.5rem}.content-block_dDHkf .field_VkCmJ{flex:1;display:flex;align-items:center;font-size:1.125rem}.content-block_dDHkf .field_VkCmJ.remark_Mi8X-{flex:2;margin-top:1rem}.content-block_dDHkf .field_VkCmJ.remark_Mi8X- .input_GwEx0{width:100%;height:6rem}.content-block_dDHkf .label_glEMl{margin:1rem .75rem 1rem 2.063rem;width:6rem;color:#124178}.content-block_dDHkf .table-wrap_G8bvv{position:relative;height:100%;border-top:1px solid #000}.content-block_dDHkf .table_lsnLI{position:absolute;width:100%;height:100%;font-size:1.125rem;border:initial}.info-wrap_9X98p{padding:1rem 0;font-size:1.125rem}.add-btn_Srdto,.info-wrap_9X98p{display:flex;align-items:center}.add-btn_Srdto{margin-left:1.75rem;padding:0 1rem;width:3.938rem;height:2.5rem;border-radius:5px;font-size:1rem;background:#e0e0e0;justify-content:center;cursor:pointer}.add-btn_Srdto.active_CDEb9{background:#4d8831;color:#fff}.amount_gztdw{margin-right:5rem}.text_Q2rmL{margin-right:1.25rem;width:6rem}.select_Gym8T{width:21.875rem}.input_GwEx0,.select_Gym8T{height:3.438rem}.input_GwEx0{width:18.75rem}.btn_fKAm1{display:flex;width:8.438rem;height:2.813rem;border-radius:5px;font-size:1.25rem;align-items:center;justify-content:center;cursor:pointer}.save_rFURY{margin-right:1.25rem;background:#1961b6;color:#fff}.cancel_N8tjq{border:1px solid #8c8c8c}.send_B\\+7aW{margin-left:1.25rem;background:#fcaa4a;color:#fff}.send_B\\+7aW.disable_w695I{opacity:.5}.icon_aR9uu{margin-right:.5rem;font-size:1rem}",""]),n.locals={wrap:"wrap_Q8DFK","content-block":"content-block_dDHkf",active:"active_CDEb9","mutli-field":"mutli-field_L7e7P",field:"field_VkCmJ",remark:"remark_Mi8X-",input:"input_GwEx0",label:"label_glEMl","table-wrap":"table-wrap_G8bvv",table:"table_lsnLI","info-wrap":"info-wrap_9X98p","add-btn":"add-btn_Srdto",amount:"amount_gztdw",text:"text_Q2rmL",select:"select_Gym8T",btn:"btn_fKAm1",save:"save_rFURY btn_fKAm1",cancel:"cancel_N8tjq btn_fKAm1",send:"send_B+7aW btn_fKAm1",disable:"disable_w695I",icon:"icon_aR9uu"},e.exports=n},800:function(e,t,r){"use strict";r.r(t);var n=r(10),l=(r(26),r(21),r(34),r(22),r(35),r(52),r(36),r(232),r(28),r(12),r(13)),o=r(653),c=r(625),d=r(632),_=r(622),f=r(107),m=r(612),v=r(620),h=r(233);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var k={components:{EditBar:c.default,FieldTable:d.default,FieldInput:f.default,FieldSelect:m.default,FieldDatePick:v.default,AlterDialog:h.default},data:function(){return{activeNames:"1",data:{created_at:Object(o.a)(new Date,"yyyy-MM-dd HH:mm:ss"),userName:"",estimated_ship_date:"",reject_reason:""},cargoList:[],cargoIndex:null,column:[{prop:"remove",label:"",width:"100",func:this.removeData},{prop:"index",label:"項次",width:"100"},{prop:"cargo_name",label:"商品名稱"},{prop:"SKU",label:"商品編碼"},{prop:"cargo_type_name",label:"商品類別"},{prop:"amount",label:"叫貨數量",isNumber:!0,isInputFun:function(e){return e.isNew}},{prop:"accept_amount",label:"核准數量",isInput:!0}],rowData:[],details:[],id:this.$route.params.id,ordersStatusOptions:[{value:2,label:"核准"},{value:3,label:"駁回"}],errorMsg:""}},computed:w(w({},Object(l.c)({userInfo:"getUserInfo"})),{},{cargoOptions:function(){return this.cargoList.map((function(e,t){return{value:t,label:e.cargo_name}}))}}),mounted:function(){this.getCargo(),this.id?this.onSearch():this.data.userName=this.userInfo.name},methods:w(w({},Object(l.b)(["actionSetToast"])),{},{toCurrency:_.b,validField:function(){var e=[];this.data.estimated_ship_date&&e.push("<div>◎請填寫預計出貨日</div>"),3!==this.data.orders_status||this.data.reject_reason||e.push("<div>◎請填寫駁回原因</div>");for(var t=0;t<this.details.length;t++){var element=this.details[t];element.amount||e.push("<div>◎請填寫項次 ".concat(t+1," 的叫貨數量，不可為零或空值</div>")),element.accept_amount||e.push("<div>◎請填寫項次 ".concat(t+1," 的核准數量，不可為零或空值</div>"))}return!e.length||(this.errorMsg=e.join(""),!1)},onSearch:function(){var e=this;this.$axios.$get("/api/order/".concat(this.id)).then((function(t){t.success&&(e.data=t.data,e.data.orders_status=null,e.details=t.data.details)}))},onSave:function(){var e=this;this.validField()&&this.$axios.$put("/api/order/".concat(this.id),{orders_remark:this.data.orders_remark,cargos:this.details.map((function(e){return{id:e.id,amount:+e.amount,accept_amount:+e.accept_amount}}))}).then((function(t){t.success&&e.actionSetToast("保存成功")}))},onBack:function(){this.$router.push("/order")},getCargo:function(){var e=this;this.$axios.$get("/api/cargo").then((function(t){t.success&&(e.cargoList=t.data)}))},removeData:function(e){var t=e.id;this.details=this.details.filter((function(e){return e.id!==t}))},onAdd:function(){if(this.cargoIndex||0===this.cargoIndex){var data=this.cargoList[this.cargoIndex];this.details.some((function(e){return e.id===data.id}))?this.errorMsg="◎列表中已有相同商品":(this.details.push(w(w({},data),{},{cargo_type_name:data.cargo_type.cargo_type_name,amount:null,subtotal:0,isNew:!0})),this.cargoIndex=null)}},onSend:function(){var e=this;this.validField()&&this.$axios.$post("/api/order/".concat(this.id,"/submit"),{orders_remark:this.data.orders_remark,reject_reason:this.data.reject_reason,orders_status:this.data.orders_status,cargos:this.details.map((function(e){return{id:e.id,amount:+e.amount,accept_amount:+e.accept_amount}}))}).then((function(t){t.success&&(e.actionSetToast("送出成功"),e.onBack())}))}})},x=r(766),$=r(7);var component=Object($.a)(k,(function(){var e=this,t=e._self._c;return t("div",{class:e.$style.wrap},[t("EditBar",{attrs:{type:"custom",label:"叫貨單審核"}},[t("div",{class:e.$style.save,on:{click:e.onSave}},[t("fa-icon",{class:e.$style.icon,attrs:{icon:"pen"}}),e._v("\n            保存\n        ")],1),e._v(" "),t("div",{class:e.$style.cancel,on:{click:e.onBack}},[e._v("\n            取消\n        ")]),e._v(" "),t("div",{class:[e.$style.send,Object(n.a)({},e.$style.disable,!e.data.orders_status)],on:{click:e.onSend}},[t("fa-icon",{class:e.$style.icon,attrs:{icon:"file-signature"}}),e._v("\n            送出\n        ")],1)]),e._v(" "),t("div",{class:e.$style["content-block"]},[t("el-collapse",{class:Object(n.a)({},e.$style.active,!e.activeNames),attrs:{accordion:""},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-collapse-item",{attrs:{name:"1"}},[t("div",{class:e.$style["mutli-field"]},[t("div",{class:e.$style.field},[t("div",{class:e.$style.label},[e._v("訂單編號")]),e._v(" "),t("div",[e._v(e._s(e.data.orders_code))])])]),e._v(" "),t("div",{class:e.$style["mutli-field"]},[t("div",{class:e.$style.field},[t("div",{class:e.$style.label},[e._v("叫貨單號")]),e._v(" "),t("div",[e._v(e._s(e.data.request_orders_code))])]),e._v(" "),t("div",{class:e.$style.field},[t("div",{class:e.$style.label},[e._v("叫貨時間")]),e._v(" "),t("div",[e._v(e._s(e.data.created_at))])]),e._v(" "),t("div",{class:e.$style.field},[t("div",{class:e.$style.label},[e._v("經辦人員")]),e._v(" "),t("div",[e._v(e._s(e.data.userName))])])]),e._v(" "),t("div",{class:e.$style["mutli-field"]},[t("div",{class:e.$style.field},[t("div",{class:e.$style.label},[e._v("叫貨總金額")]),e._v(" "),t("div",[e._v(e._s(e.toCurrency(e.data.priceTotal))+" 元")])]),e._v(" "),t("div",{class:e.$style.field},[t("div",{class:e.$style.label},[e._v("叫貨總數量")]),e._v(" "),t("div",[e._v(e._s(e.toCurrency(e.data.amountTotal)))])]),e._v(" "),t("div",{class:e.$style.field},[t("div",{class:e.$style.label},[e._v("預計出貨日")]),e._v(" "),t("FieldDatePick",{class:e.$style.input,model:{value:e.data.estimated_ship_date,callback:function(t){e.$set(e.data,"estimated_ship_date",t)},expression:"data.estimated_ship_date"}})],1)]),e._v(" "),t("div",{class:e.$style["mutli-field"]},[t("div",{class:[e.$style.field,e.$style.remark]},[t("div",{class:e.$style.label},[e._v("備註")]),e._v(" "),t("FieldInput",{class:e.$style.input,attrs:{type:"textarea"},model:{value:e.data.orders_remark,callback:function(t){e.$set(e.data,"orders_remark",t)},expression:"data.orders_remark"}})],1)]),e._v(" "),t("div",{class:e.$style["mutli-field"]},[t("div",{class:e.$style.field},[t("div",{class:e.$style.label},[e._v("審核狀態")]),e._v(" "),e._l(e.ordersStatusOptions,(function(option){return t("el-radio",{key:option.value,attrs:{label:option.value},model:{value:e.data.orders_status,callback:function(t){e.$set(e.data,"orders_status",t)},expression:"data.orders_status"}},[e._v("\n                            "+e._s(option.label)+"\n                        ")])}))],2)]),e._v(" "),3===e.data.orders_status?t("div",{class:e.$style["mutli-field"]},[t("div",{class:[e.$style.field,e.$style.remark]},[t("div",{class:e.$style.label,attrs:{required:""}},[e._v("原因")]),e._v(" "),t("FieldInput",{class:e.$style.input,attrs:{type:"textarea"},model:{value:e.data.reject_reason,callback:function(t){e.$set(e.data,"reject_reason",t)},expression:"data.reject_reason"}})],1)]):e._e()])],1),e._v(" "),t("div",{class:e.$style["info-wrap"]},[t("div",{class:e.$style.text},[e._v("加入商品")]),e._v(" "),t("FieldSelect",{class:e.$style.select,attrs:{options:e.cargoOptions,placeholder:"選擇叫貨商品"},model:{value:e.cargoIndex,callback:function(t){e.cargoIndex=t},expression:"cargoIndex"}}),e._v(" "),t("div",{class:[e.$style["add-btn"],Object(n.a)({},e.$style.active,e.cargoIndex||0===e.cargoIndex)],on:{click:e.onAdd}},[e._v("新增")])],1),e._v(" "),t("div",{class:e.$style["table-wrap"]},[t("FieldTable",{class:e.$style.table,attrs:{"type-label":"商品","empty-icon-left":"",border:!1,"table-data":e.details,column:e.column}})],1)],1),e._v(" "),e.errorMsg?t("AlterDialog",{attrs:{msg:e.errorMsg},on:{close:function(t){e.errorMsg=""}}}):e._e()],1)}),[],!1,(function(e){this.$style=x.default.locals||x.default}),null,null);t.default=component.exports}}]);